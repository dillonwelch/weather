<%= form_with url: "/search" do |form| %>
  <%= form.label :street %>
  <%= form.text_field :street, { value: params[:street] } %>
  </br>
  <%= form.label :city %>
  <%= form.text_field :city, { value: params[:city] } %>
  </br>
  <%= form.label :state %>
  <%= form.text_field :state, { value: params[:state] } %>
  </br>
  <%= form.label :zip %>
  <%= form.text_field :zip, { value: params[:zip] } %>
  </br>
  <%= form.submit "Search" %>
<% end %>

<% if @temps %>
  Results:
  </br>
  <% (@temps || []).each do |temp| %>
    Latitude: <%= temp[:lat] %>
    </br>
    Longitude: <%= temp[:lon] %>
    </br>
    Current temp is: <%= temp["current"]["current_temp"] %> with a low of <%= temp["current"]["low_temp"] %> and a high of <%= temp["current"]["high_temp"] %>
    </br>
    <table>
      <tr>
        <th>Time</th>
        <th>Temp</th>
        <th>Low</th>
        <th>High</th>
      </tr>
      <% temp[:extended].each do |extended_temp| %>
        <tr>
          <th><%= extended_temp[:time] %></th>
          <th><%= extended_temp[:current_temp] %></th>
          <th><%= extended_temp[:low_temp] %></th>
          <th><%= extended_temp[:high_temp] %></th>
        </tr>
      <% end %>
    </table>
  <% end %>
<% end %>
